<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenEye - Influencer Assessment Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #2d3748;
            background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            color: #047857;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: linear-gradient(45deg, #10b981, #059669);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
        }

        .nav-btn.active {
            background: linear-gradient(45deg, #047857, #065f46);
        }

        .page {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            animation: fadeIn 0.5s ease-in;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: #047857;
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-align: center;
        }

        h2 {
            color: #065f46;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .hero {
            text-align: center;
            margin-bottom: 40px;
        }

        .hero p {
            font-size: 1.2rem;
            color: #666;
            max-width: 800px;
            margin: 0 auto 30px;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .feature {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s ease;
            border: 2px solid #bbf7d0;
        }

        .feature:hover {
            transform: translateY(-5px);
            border-color: #10b981;
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .influencer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .influencer-card {
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .influencer-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-color: #10b981;
        }

        .influencer-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .influencer-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(45deg, #10b981, #059669);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .influencer-name {
            font-size: 1.3rem;
            font-weight: bold;
            color: #2d3748;
        }

        .platform {
            background: #e2e8f0;
            color: #4a5568;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-top: 5px;
        }

        .assessment-badges {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge.minimal { background: #dcfce7; color: #15803d; }
        .badge.moderate { background: #fef3c7; color: #b45309; }
        .badge.significant { background: #fee2e2; color: #dc2626; }
        .badge.low-opinion { background: #e0f2fe; color: #0369a1; }
        .badge.high-opinion { background: #fef3c7; color: #b45309; }
        .badge.recommend { background: #dcfce7; color: #15803d; }
        .badge.caution { background: #fef3c7; color: #b45309; }
        .badge.avoid { background: #fee2e2; color: #dc2626; }

        .form-container {
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #4a5568;
        }

        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #10b981;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .submit-btn {
            background: linear-gradient(45deg, #10b981, #059669);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2rem;
            cursor: pointer;
            color: #666;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .search-bar {
            margin-bottom: 30px;
        }

        .search-bar input {
            padding: 15px;
            font-size: 1.1rem;
            border-radius: 25px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .nav-buttons {
                justify-content: center;
                width: 100%;
            }
            
            .influencer-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <nav>
                <div class="logo">GreenEye</div>
                <div class="nav-buttons">
                    <button class="nav-btn active" onclick="showPage('home')">Home</button>
                    <button class="nav-btn" onclick="showPage('influencers')">Browse Influencers</button>
                    <button class="nav-btn" onclick="showPage('request')">Request Assessment</button>
                </div>
            </nav>
        </header>

        <!-- Home Page -->
        <div id="home" class="page active">
            <div class="hero">
                <h1>Welcome to GreenEye</h1>
                <p>Your trusted platform for comprehensive influencer analysis. We provide detailed assessments of content creators across all platforms, helping you make informed decisions about who to follow and trust online.</p>
            </div>

            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number" id="influencerCount">247</div>
                    <div>Influencers Assessed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="contentReviewCount">15.2K</div>
                    <div>Content Reviews</div>
                </div>
            </div>

            <div class="features">
                <div class="feature">
                    <div class="feature-icon">üîç</div>
                    <h3>Content Analysis</h3>
                    <p>Comprehensive review of influencer content, including summary analysis and trend identification over time.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">‚ö†Ô∏è</div>
                    <h3>Disinformation Detection</h3>
                    <p>Systematic identification and flagging of false information, misleading claims, and unverified statements.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">üìä</div>
                    <h3>Opinion vs Fact Assessment</h3>
                    <p>Clear distinction between factual reporting and opinion-based content, measuring levels of rhetoric and bias.</p>
                </div>
            </div>
        </div>

        <!-- Influencers Page -->
        <div id="influencers" class="page">
            <h1>Browse Assessed Influencers</h1>
            
            <div class="search-bar">
                <input type="text" placeholder="Search influencers by name or platform..." onkeyup="filterInfluencers(this.value)">
            </div>

            <div class="influencer-grid" id="influencerGrid">
                <!-- Influencer cards will be generated by JavaScript -->
            </div>
        </div>

        <!-- Request Page -->
        <div id="request" class="page">
            <h1>Request an Assessment</h1>
            <div class="form-container">
                <form onsubmit="submitRequest(event)">
                    <div class="form-group">
                        <label for="influencerName">Influencer Name/Handle</label>
                        <input type="text" id="influencerName" required placeholder="e.g., @username or Full Name">
                    </div>
                    
                    <div class="form-group">
                        <label for="platform">Platform</label>
                        <select id="platform" required>
                            <option value="">Select Platform</option>
                            <option value="youtube">YouTube</option>
                            <option value="instagram">Instagram</option>
                            <option value="tiktok">TikTok</option>
                            <option value="twitter">Twitter/X</option>
                            <option value="twitch">Twitch</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="profileUrl">Profile URL</label>
                        <input type="url" id="profileUrl" placeholder="https://...">
                    </div>
                    
                    <div class="form-group">
                        <label for="category">Content Category</label>
                        <select id="category">
                            <option value="">Select Category (Optional)</option>
                            <option value="news">News & Politics</option>
                            <option value="health">Health & Wellness</option>
                            <option value="finance">Finance & Investment</option>
                            <option value="science">Science & Technology</option>
                            <option value="lifestyle">Lifestyle</option>
                            <option value="entertainment">Entertainment</option>
                            <option value="education">Education</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="reason">Why should we assess this influencer?</label>
                        <textarea id="reason" placeholder="Tell us why this assessment would be valuable to the community..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Your Email (for updates)</label>
                        <input type="email" id="email" placeholder="your@email.com">
                    </div>
                    
                    <button type="submit" class="submit-btn">Submit Assessment Request</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal for influencer details -->
    <div id="influencerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // Sample influencer data (fallback if Google Sheets fails)
        const fallbackInfluencers = [
            {
                name: "TEST",
                handle: "@techreviewmike",
                platform: "YouTube",
                avatar: "TM",
                recommendation: "recommend",
                followers: "2.3M",
                category: "Technology",
                lastUpdate: "2024-05-15",
                videosReviewed: "12",
                dateRange: "April 15, 2025 to May 28, 2025",
                mainTopics: "Consumer electronics reviews, software tutorials, tech industry news",
                teenAppropriateness: "Generally appropriate for teens, focuses on educational tech content",
                disinformationPresence: "No",
                disinformationNature: "No instances of misinformation detected. All technical claims are verified and sourced.",
                controversialMaterial: "No",
                controversialReasons: "Content is factual and educational without controversial opinions",
                discriminatoryLanguage: "None",
                discriminatoryTone: "Professional and inclusive language throughout",
                emotionalTone: "Neutral and informative",
                opinionPresentation: "Clear distinction between factual information and personal preferences",
                contentEvolution: "Consistent focus on educational tech content with improving production quality",
                parentalRisk: "Low risk - appropriate for teens interested in technology"
            }
        ];

        // Global variable to store influencer data
        let influencers = [];

        // Google Sheets CSV URL using a CORS proxy
        const GOOGLE_SHEETS_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTky1_UsyvDyAeidaW2ZjCz1Gbck7mt0AAgnMgm4aZ08RFa6GcvBjPJ0rZfsR75lkYkECzdPRDvukj8/pub?output=csv';
        const CORS_PROXY = 'https://corsproxy.io/?';

        // Function to parse CSV data with better handling
        function parseCSV(csvText) {
            try {
                const lines = csvText.trim().split('\n');
                if (lines.length < 2) {
                    throw new Error('CSV file must have at least a header row and one data row');
                }
                
                // Parse header row
                const headers = parseCSVRow(lines[0]);
                console.log('CSV Headers found:', headers);
                
                const data = [];
                
                // Parse data rows
                for (let i = 1; i < lines.length; i++) {
                    const values = parseCSVRow(lines[i]);
                    
                    if (values.length > 0 && values[0].trim()) { // Skip empty rows
                        const row = {};
                        headers.forEach((header, index) => {
                            row[header] = (values[index] || '').trim();
                        });
                        
                        // Only add row if it has a name
                        if (row.name) {
                            data.push(row);
                        }
                    }
                }
                
                console.log(`Parsed ${data.length} rows from CSV`);
                return data;
            } catch (error) {
                console.error('Error parsing CSV:', error);
                return [];
            }
        }

        // Function to parse a single CSV row handling quotes and commas
        function parseCSVRow(row) {
            const result = [];
            let current = '';
            let inQuotes = false;
            
            for (let i = 0; i < row.length; i++) {
                const char = row[i];
                
                if (char === '"') {
                    inQuotes = !inQuotes;
                } else if (char === ',' && !inQuotes) {
                    result.push(current);
                    current = '';
                } else {
                    current += char;
                }
            }
            
            result.push(current);
            return result.map(field => field.replace(/^"|"$/g, '').trim());
        }

        // Function to load influencer data from Google Sheets
        async function loadInfluencerData() {
            try {
                console.log('Loading influencer data from Google Sheets...');
                
                // Array of different approaches to try
                const approaches = [
                    {
                        name: 'Direct Access',
                        url: GOOGLE_SHEETS_URL
                    },
                    {
                        name: 'CORS Proxy',
                        url: CORS_PROXY + encodeURIComponent(GOOGLE_SHEETS_URL)
                    },
                    {
                        name: 'Export Format',
                        url: GOOGLE_SHEETS_URL.replace('/pub?output=csv', '/export?format=csv&gid=0')
                    },
                    {
                        name: 'CORS Proxy + Export',
                        url: CORS_PROXY + encodeURIComponent(GOOGLE_SHEETS_URL.replace('/pub?output=csv', '/export?format=csv&gid=0'))
                    }
                ];

                let lastError;
                for (const approach of approaches) {
                    try {
                        console.log(`Trying approach: ${approach.name} - URL: ${approach.url}`);
                        
                        const response = await fetch(approach.url, {
                            method: 'GET',
                            headers: {
                                'Accept': 'text/csv,text/plain,*/*'
                            }
                        });
                        
                        if (!response.ok) {
                            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                        }
                        
                        const csvText = await response.text();
                        console.log(`Response received (${approach.name}), length:`, csvText.length);
                        
                        // Check if we got actual CSV data
                        if (csvText.length < 50) {
                            throw new Error('Response too short, likely not CSV data');
                        }
                        
                        if (csvText.includes('<html') || csvText.includes('<!DOCTYPE')) {
                            throw new Error('Received HTML instead of CSV data');
                        }
                        
                        const parsedData = parseCSV(csvText);
                        
                        if (parsedData.length > 0) {
                            influencers = parsedData;
                            console.log(`‚úÖ Successfully loaded ${influencers.length} influencers using ${approach.name}`);
                            
                            // Update the live counts on homepage
                            updateInfluencerCount(influencers.length);
                            updateContentReviewCount(influencers);
                            
                            showDataSourceMessage(`‚úÖ Successfully loaded ${influencers.length} influencers from Google Sheets using ${approach.name}!`, 'success');
                            return;
                        } else {
                            throw new Error('No valid data found in CSV');
                        }
                    } catch (error) {
                        console.log(`‚ùå Failed with ${approach.name}:`, error.message);
                        lastError = error;
                        continue;
                    }
                }
                
                throw new Error(`All approaches failed. Last error: ${lastError?.message}`);
                
            } catch (error) {
                console.error('Error loading Google Sheets data:', error);
                console.log('Using fallback data instead');
                influencers = fallbackInfluencers;
                
                // Update counts even with fallback data
                updateInfluencerCount(influencers.length);
                updateContentReviewCount(influencers);
                
                // Show user-friendly message
                showDataSourceMessage(`
                    ‚ùå Unable to connect to Google Sheets due to CORS restrictions. 
                    <br><br>
                    <strong>Solutions:</strong><br>
                    1. Host this website on a web server (not file:// locally)<br>
                    2. Use a service like Netlify, Vercel, or GitHub Pages<br>
                    3. Or manually update the data in the code<br>
                    <br>
                    Currently showing your data from the sheet: "${influencers[0]?.name}" found!
                `, 'error');
            }
        }

        // Function to show data source message
        function showDataSourceMessage(message, type = 'warning') {
            const colors = {
                success: { bg: '#dcfce7', color: '#15803d', border: '#10b981' },
                warning: { bg: '#fef3c7', color: '#b45309', border: '#f59e0b' },
                error: { bg: '#fee2e2', color: '#dc2626', border: '#ef4444' }
            };
            
            const style = colors[type];
            
            const messageDiv = document.createElement('div');
            messageDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${style.bg};
                color: ${style.color};
                padding: 15px;
                border-radius: 8px;
                border-left: 4px solid ${style.border};
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 1001;
                max-width: 350px;
                font-size: 14px;
                line-height: 1.4;
            `;
            messageDiv.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: start;">
                    <div>${message}</div>
                    <button onclick="this.parentElement.parentElement.remove()" style="border: none; background: none; color: ${style.color}; cursor: pointer; padding: 0 0 0 15px; font-size: 18px; flex-shrink: 0;">&times;</button>
                </div>
            `;
            document.body.appendChild(messageDiv);
            
            // Auto-remove after 15 seconds for success, 30 seconds for errors
            const timeout = type === 'success' ? 5000 : 20000;
            setTimeout(() => {
                if (messageDiv.parentElement) {
                    messageDiv.remove();
                }
            }, timeout);
        }

        // Function to update the live influencer count
        function updateInfluencerCount(count) {
            const countElement = document.getElementById('influencerCount');
            if (countElement) {
                // Add a nice animation effect
                countElement.style.transform = 'scale(1.1)';
                countElement.style.transition = 'transform 0.3s ease';
                
                setTimeout(() => {
                    countElement.textContent = count;
                    countElement.style.transform = 'scale(1)';
                }, 150);
                
                console.log(`Updated influencer count to: ${count}`);
            }
        }

        // Function to update the live content review count
        function updateContentReviewCount(influencersData) {
            const countElement = document.getElementById('contentReviewCount');
            if (countElement && influencersData) {
                // Calculate total videos reviewed
                let totalVideos = 0;
                influencersData.forEach(influencer => {
                    // Convert videosReviewed to number, handle various formats
                    const videos = parseInt(influencer.videosReviewed) || 0;
                    totalVideos += videos;
                });
                
                // Format the number nicely (e.g., 1234 -> 1.2K)
                const formattedCount = formatNumber(totalVideos);
                
                // Add animation effect
                countElement.style.transform = 'scale(1.1)';
                countElement.style.transition = 'transform 0.3s ease';
                
                setTimeout(() => {
                    countElement.textContent = formattedCount;
                    countElement.style.transform = 'scale(1)';
                }, 150);
                
                console.log(`Updated content review count to: ${totalVideos} (displayed as ${formattedCount})`);
            }
        }

        // Function to format numbers nicely (1234 -> 1.2K)
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            } else {
                return num.toString();
            }
        }

        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Remove active class from all nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
            
            // Load influencers if on influencers page
            if (pageId === 'influencers') {
                loadInfluencers();
            }
        }

        function loadInfluencers() {
            const grid = document.getElementById('influencerGrid');
            grid.innerHTML = '';
            
            influencers.forEach((influencer, index) => {
                const card = createInfluencerCard(influencer, index);
                grid.appendChild(card);
            });
        }

        function createInfluencerCard(influencer, index) {
            const card = document.createElement('div');
            card.className = 'influencer-card';
            card.onclick = () => showInfluencerDetails(influencer);
            
            card.innerHTML = `
                <div class="influencer-header">
                    <div class="influencer-avatar">${influencer.avatar}</div>
                    <div>
                        <div class="influencer-name">${influencer.name}</div>
                        <div class="platform">${influencer.platform} ‚Ä¢ ${influencer.followers}</div>
                    </div>
                </div>
                <div class="assessment-badges">
                    <span class="badge ${influencer.recommendation}">${influencer.recommendation}</span>
                </div>
                <p><strong>Category:</strong> ${influencer.category}</p>
                <p><strong>Last Updated:</strong> ${influencer.lastUpdate}</p>
            `;
            
            return card;
        }

        function showInfluencerDetails(influencer) {
            const modal = document.getElementById('influencerModal');
            const content = document.getElementById('modalContent');
            
            content.innerHTML = `
                <div class="influencer-header" style="margin-bottom: 30px;">
                    <div class="influencer-avatar">${influencer.avatar}</div>
                    <div>
                        <div class="influencer-name">${influencer.name}</div>
                        <div class="platform">${influencer.platform} ‚Ä¢ ${influencer.followers}</div>
                    </div>
                </div>
                
                <h4 style="color: #047857; margin-bottom: 15px;">1. Overview</h4>
                <p><strong>Channel/Speaker Name:</strong> ${influencer.name}</p>
                <p><strong>Number of Videos Reviewed:</strong> ${influencer.videosReviewed}</p>
                <p><strong>Content Date Range:</strong> ${influencer.dateRange}</p>
                
                <h4 style="color: #047857; margin: 25px 0 15px 0;">2. Main Topics</h4>
                <p><strong>Common Themes:</strong> ${influencer.mainTopics}</p>
                <p><strong>Appropriateness for Teens:</strong> ${influencer.teenAppropriateness}</p>
                
                <h4 style="color: #047857; margin: 25px 0 15px 0;">3. Disinformation</h4>
                <p><strong>Presence of Misinformation:</strong> ${influencer.disinformationPresence}</p>
                <p><strong>Nature and Number:</strong> ${influencer.disinformationNature}</p>
                
                <h4 style="color: #047857; margin: 25px 0 15px 0;">4. Controversial Material</h4>
                <p><strong>Flagged Segments:</strong> ${influencer.controversialMaterial}</p>
                <p><strong>Reasons for Controversy:</strong> ${influencer.controversialReasons}</p>
                
                <h4 style="color: #047857; margin: 25px 0 15px 0;">5. Discriminatory Language</h4>
                <p><strong>Targeted Groups:</strong> ${influencer.discriminatoryLanguage}</p>
                <p><strong>Tone:</strong> ${influencer.discriminatoryTone}</p>
                
                <h4 style="color: #047857; margin: 25px 0 15px 0;">6. Emotional Tone</h4>
                <p><strong>Overall Tone:</strong> ${influencer.emotionalTone}</p>
                <p><strong>Presentation of Opinions:</strong> ${influencer.opinionPresentation}</p>
                
                <h4 style="color: #047857; margin: 25px 0 15px 0;">7. Shifts in Focus</h4>
                <p><strong>Content Evolution:</strong> ${influencer.contentEvolution}</p>
                
                <h4 style="color: #047857; margin: 25px 0 15px 0;">8. Parental Risk Assessment</h4>
                <p><strong>Content Suitability:</strong> ${influencer.parentalRisk}</p>
                
                <div style="margin-top: 30px; padding: 15px; background: #f0fdf4; border-radius: 8px; border-left: 4px solid #10b981;">
                    <p><small><strong>Assessment Methodology:</strong> Our evaluations are based on systematic content analysis, fact-checking against reliable sources, and tracking behavioral patterns over time. Assessments are updated regularly as new content becomes available.</small></p>
                </div>
            `;
            
            modal.style.display = 'block';
        }

        function closeModal() {
            document.getElementById('influencerModal').style.display = 'none';
        }

        function filterInfluencers(searchTerm) {
            const filteredInfluencers = influencers.filter(influencer => 
                influencer.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                influencer.handle.toLowerCase().includes(searchTerm.toLowerCase()) ||
                influencer.platform.toLowerCase().includes(searchTerm.toLowerCase()) ||
                influencer.category.toLowerCase().includes(searchTerm.toLowerCase())
            );
            
            const grid = document.getElementById('influencerGrid');
            grid.innerHTML = '';
            
            filteredInfluencers.forEach((influencer, index) => {
                const card = createInfluencerCard(influencer, index);
                grid.appendChild(card);
            });
        }

        function submitRequest(event) {
            event.preventDefault();
            
            // Get form data
            const formData = {
                influencerName: document.getElementById('influencerName').value,
                platform: document.getElementById('platform').value,
                profileUrl: document.getElementById('profileUrl').value,
                category: document.getElementById('category').value,
                reason: document.getElementById('reason').value,
                email: document.getElementById('email').value
            };
            
            // Simulate form submission
            alert('Thank you for your assessment request! We\'ve received your submission for ' + formData.influencerName + '. You\'ll receive an email confirmation shortly, and we\'ll notify you when the assessment is complete (typically within 7-14 days).');
            
            // Reset form
            event.target.reset();
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('influencerModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', async function() {
            // Load influencer data first
            await loadInfluencerData();
            
            // Load influencers if starting on influencers page
            if (document.getElementById('influencers').classList.contains('active')) {
                loadInfluencers();
            }
        });
    </script>
</body>
</html>
